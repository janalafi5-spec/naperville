<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Naperville town - Shortest path</title>
  <style>
    :root{
      --bg: #eaf6ee;
      --sidebar: #eff7fb;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --shadow2: 0 6px 18px rgba(0,0,0,.08);

      --muted: #6b7280;
      --purple: #c9a4ff;
      --purple2:#b58cff;
      --chosen: #ef4444;
      --road: #111827;
      --special: #5b6cf2;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color:#0f172a;
    }
    .app{
      height: 100vh;
      display:grid;
      grid-template-columns: 1fr 420px;
    }

    /* LEFT MAP STAGE */
    .stage{
      position:relative;
      overflow:hidden;
      background:#78c37e;
    }

    /* background big roads aligned closer to map cross */
    .stage::before{
      content:"";
      position:absolute;
      inset:-80px;

      /* tweak these if you want the cross to move */
      --v1: 56%;
      --v2: 61%;
      --h1: 52%;
      --h2: 58%;

      background:
        linear-gradient(90deg,
          transparent 0%,
          transparent var(--v1),
          rgba(255,255,255,.55) var(--v1),
          rgba(255,255,255,.55) var(--v2),
          transparent var(--v2),
          transparent 100%),

        linear-gradient(0deg,
          transparent 0%,
          transparent var(--h1),
          rgba(255,255,255,.55) var(--h1),
          rgba(255,255,255,.55) var(--h2),
          transparent var(--h2),
          transparent 100%);
      pointer-events:none;
    }

    .lake{
      position:absolute;
      right:-90px; top:110px;
      width:220px; height:430px;
      background: rgba(96,165,250,.55);
      border-radius: 60% 40% 60% 40%;
      pointer-events:none;
    }

    /* title moved slightly to the right */
    .stage-title{
      position:absolute;
      top: 110px;
      left: 54%;
      transform: translateX(-50%);
      font-size: 64px;
      font-weight: 900;
      letter-spacing: -1px;
      color: rgba(0,0,0,.85);
      user-select:none;
      pointer-events:none;
      text-shadow: 0 2px 0 rgba(255,255,255,.12);
    }

    canvas{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      display:block;
    }

    /* RIGHT SIDEBAR */
    .panel{
      background: var(--sidebar);
      padding: 18px;
      border-left: 1px solid rgba(0,0,0,.05);
      overflow:auto;
    }
    .panel-card{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.05);
      border-radius: 18px;
      padding: 18px;
      box-shadow: var(--shadow);
    }
    .panel h2{
      margin:0 0 14px;
      font-size:22px;
      font-weight:800;
      color: rgba(0,0,0,.82);
    }
    .form-row{
      display:grid;
      grid-template-columns: 88px 1fr;
      gap:12px;
      align-items:center;
      margin: 10px 0;
    }
    .form-row label{
      font-weight:700;
      color: rgba(0,0,0,.70);
      font-size:14px;
    }
    select, input{
      width:100%;
      height:44px;
      border-radius:12px;
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      padding: 0 12px;
      font-size:14px;
      outline:none;
      box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
    }
    .btn{
      width:100%;
      height:44px;
      border-radius:12px;
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      font-weight:800;
      cursor:pointer;
      box-shadow: var(--shadow2);
      margin-top: 10px;
    }
    .btn:active{ transform: translateY(1px); }
    .help{
      margin-top:14px;
      color: var(--muted);
      font-size:12.5px;
      line-height:1.35;
    }
    .legend{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
      align-items:center;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      background:#fff;
      font-size:12px;
      color: rgba(0,0,0,.70);
      user-select:none;
    }
    .dot{ width:10px; height:10px; border-radius:999px; display:inline-block; }
    .dot.black{ background: var(--road); }
    .dot.purple{ background: var(--special); }
    .dot.red{ background: var(--chosen); }

    .result{
      margin-top: 14px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 14px;
      padding: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,.06);
      font-size: 13px;
      color: rgba(0,0,0,.78);
    }
    .result strong{ color: rgba(0,0,0,.82); }

    .subcard{
      margin-top: 12px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 14px;
      padding: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,.05);
    }
    .subcard h3{
      margin: 0 0 8px;
      font-size: 14px;
      font-weight: 900;
      color: rgba(0,0,0,.78);
    }
    .muted{ color: var(--muted); font-size: 12.5px; }
    .list{ margin: 8px 0 0; padding-left: 18px; }
    .pill{
      display:inline-block;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      background:#fff;
      font-size:12px;
      margin-left:6px;
      color: rgba(0,0,0,.70);
    }

    @media (max-width: 980px){
      .app{ grid-template-columns: 1fr; }
      .panel{ border-left:none; border-top: 1px solid rgba(0,0,0,.05); }
      .stage-title{ font-size: 44px; top: 70px; left: 54%; }
    }
  </style>
</head>
<body>

<div class="app">
  <div class="stage">
    <div class="lake"></div>
    <div class="stage-title">Naperville town</div>
    <canvas id="mapCanvas"></canvas>
  </div>

  <aside class="panel">
    <div class="panel-card">
      <h2>Shortest path</h2>

      <div class="form-row">
        <label for="startNode">Start</label>
        <select id="startNode"></select>
      </div>

      <div class="form-row">
        <label for="endNode">End</label>
        <select id="endNode"></select>
      </div>

      <div class="form-row">
        <label for="algoMode">Algo</label>
        <select id="algoMode">
          <option value="Dijkstra">Dijkstra</option>
          <option value="A*">A*</option>
        </select>
      </div>

      <button class="btn" id="findBtn">Find path</button>
      <button class="btn" id="clearBtn">Clear highlight</button>

      <div class="help">
        Click nodes to set <b>Start</b> then <b>End</b>.<br/>
        Dijkstra: shortest guaranteed.<br/>
        A*: shortest + faster search using a heuristic.
      </div>

      <div class="legend">
        <span class="chip"><span class="dot black"></span>roads</span>
        <span class="chip"><span class="dot purple"></span>special road</span>
        <span class="chip"><span class="dot red"></span>chosen route</span>
      </div>

      <div class="result" id="resultBox">
        <div><strong>Algorithm:</strong> <span id="algoOut">-</span></div>
        <div><strong>Route:</strong> <span id="routeOut">-</span></div>
        <div><strong>Total distance:</strong> <span id="distOut">-</span></div>
      </div>

      <div class="subcard">
        <h3>Recommended near destination</h3>
        <div class="muted" id="destSummary">Select a destination and click Find path.</div>

        <div style="margin-top:10px; font-weight:800; font-size:13px; color: rgba(0,0,0,.75);">
          Activities at destination
        </div>
        <ul class="list" id="destActivities"></ul>

        <div style="margin-top:10px; font-weight:800; font-size:13px; color: rgba(0,0,0,.75);">
          Nearby places
          <span class="pill">radius <span id="radOut">220</span>px</span>
        </div>
        <input id="nearRadius" type="number" min="80" max="600" value="220" style="margin-top:8px;">
        <ul class="list" id="nearbyList"></ul>
      </div>
    </div>
  </aside>
</div>

<script>
/* =========================================================
   DATA: places, icons, activities, roads
========================================================= */
const iconByType = {
  hotel:'ðŸ¨', mosque:'ðŸ•Œ', school:'ðŸ«', mall:'ðŸ›ï¸', market:'ðŸ›’',
  pet:'ðŸ¾', train:'ðŸš†', hospital:'ðŸ¥', salon:'ðŸ’‡', play:'ðŸ•¹ï¸',
  costco:'ðŸª', dvl:'ðŸ›ï¸', uni:'ðŸŽ“'
};

const nodes = [
  { id:'train station', x: 320, y: 120, type:'train' },
  { id:'School',        x: 320, y: 230, type:'school' },
  { id:'Pet shop',      x: 170, y: 300, type:'pet' },
  { id:'Hotel',         x: 250, y: 520, type:'hotel' },
  { id:'Market',        x: 430, y: 360, type:'market' },
  { id:'Mosque',        x: 740, y: 360, type:'mosque' },
  { id:'Mall',          x: 940, y: 260, type:'mall' },
  { id:'Hospital',      x: 820, y: 560, type:'hospital' },

  // extra places
  { id:'Salon',         x: 520, y: 520, type:'salon' },
  { id:'Play Room',     x: 620, y: 585, type:'play' },
  { id:'Costco',        x: 980, y: 610, type:'costco' },
  { id:'DVL',           x: 980, y: 420, type:'dvl' },
  { id:'University',    x: 110, y: 590, type:'uni' },
];

const activities = {
  'train station': ['Buy tickets', 'Travel by train', 'Waiting lounge'],
  'School': ['Attend classes', 'Meet teachers', 'Study / library'],
  'Pet shop': ['Pet supplies', 'Adoption inquiry', 'Grooming'],
  'Hotel': ['Check in / rest', 'Book a room', 'Breakfast'],
  'Market': ['Groceries', 'Household items', 'Quick snacks'],
  'Mosque': ['Prayer', 'Reflection', 'Community gathering'],
  'Mall': ['Shopping', 'Food court', 'Entertainment'],
  'Hospital': ['Emergency', 'Appointments', 'Pharmacy'],
  'Salon': ['Haircut', 'Styling', 'Self-care'],
  'Play Room': ['Kids activities', 'Arcade / games', 'Family time'],
  'Costco': ['Bulk shopping', 'Bakery', 'Deals'],
  'DVL': ['Documents', 'License/vehicle services', 'Customer service'],
  'University': ['Lectures', 'Library', 'Campus events'],
};

// roads: black normal + purple special
const edges = [
  { a:'train station', b:'School',        kind:'road' },
  { a:'School',        b:'Market',        kind:'road' },
  { a:'Market',        b:'Mosque',        kind:'road' },
  { a:'Mosque',        b:'Hospital',      kind:'road' },

  { a:'School',        b:'Pet shop',      kind:'road' },
  { a:'Pet shop',      b:'Hotel',         kind:'special' },
  { a:'Hotel',         b:'Market',        kind:'road' },

  { a:'Mosque',        b:'Mall',          kind:'road' },
  { a:'Mall',          b:'Hospital',      kind:'special' },

  // added area
  { a:'Market',        b:'Salon',         kind:'road' },
  { a:'Salon',         b:'Play Room',     kind:'special' },
  { a:'Play Room',     b:'Hospital',      kind:'road' },
  { a:'Hospital',      b:'Costco',        kind:'road' },
  { a:'DVL',           b:'Hospital',      kind:'special' },
  { a:'Mall',          b:'DVL',           kind:'road' },
  { a:'University',    b:'Hotel',         kind:'road' },
];

const adj = new Map();
nodes.forEach(n => adj.set(n.id, []));
edges.forEach(e => {
  adj.get(e.a).push({to:e.b, kind:e.kind});
  adj.get(e.b).push({to:e.a, kind:e.kind});
});

/* =========================================================
   CANVAS setup (fit to CSS size)
========================================================= */
const canvas = document.getElementById("mapCanvas");
const ctx = canvas.getContext("2d");

function fitCanvasToCSS() {
  const r = canvas.getBoundingClientRect();
  canvas.width = Math.round(r.width);
  canvas.height = Math.round(r.height);
}
fitCanvasToCSS();
window.addEventListener("resize", () => { fitCanvasToCSS(); draw(); });

function nodeById(id){ return nodes.find(n => n.id === id); }
function euclid(a,b){
  const n1=nodeById(a), n2=nodeById(b);
  return Math.hypot(n2.x-n1.x, n2.y-n1.y);
}

/* Convert pixel distance to km for the result box only */
function pxToKm(px){ return px / 110; }

/* =========================================================
   DIJKSTRA + A*
========================================================= */
function dijkstra(start, goal){
  const dist = new Map();
  const prev = new Map();
  const unvisited = new Set(nodes.map(n=>n.id));
  nodes.forEach(n=>dist.set(n.id, Infinity));
  dist.set(start, 0);

  let visitedCount = 0;

  function closest(){
    let best=null, bestVal=Infinity;
    for(const id of unvisited){
      const v=dist.get(id);
      if(v<bestVal){bestVal=v; best=id;}
    }
    return best;
  }

  while(unvisited.size){
    const cur = closest();
    if(cur === null) break;
    if(dist.get(cur) === Infinity) break;

    unvisited.delete(cur);
    visitedCount++;

    if(cur === goal) break;

    for(const nei of adj.get(cur)){
      if(!unvisited.has(nei.to)) continue;
      const alt = dist.get(cur) + euclid(cur, nei.to);
      if(alt < dist.get(nei.to)){
        dist.set(nei.to, alt);
        prev.set(nei.to, cur);
      }
    }
  }

  if(start === goal) return {path:[start], visitedCount};
  if(!prev.has(goal)) return {path:null, visitedCount};

  const path=[];
  let cur=goal;
  while(cur!==start){ path.push(cur); cur=prev.get(cur); }
  path.push(start); path.reverse();
  return {path, visitedCount};
}

function astar(start, goal){
  const open = new Set([start]);
  const came = new Map();
  const g = new Map(), f = new Map();
  nodes.forEach(n=>{ g.set(n.id, Infinity); f.set(n.id, Infinity); });
  g.set(start, 0);
  f.set(start, euclid(start, goal));

  let visitedCount=0;

  function lowestF(){
    let best=null, bestVal=Infinity;
    for(const id of open){
      const v=f.get(id);
      if(v<bestVal){bestVal=v; best=id;}
    }
    return best;
  }

  while(open.size){
    const cur = lowestF();
    visitedCount++;

    if(cur === goal){
      const path=[cur];
      let x=cur;
      while(came.has(x)){ x=came.get(x); path.push(x); }
      path.reverse();
      return {path, visitedCount};
    }

    open.delete(cur);

    for(const nei of adj.get(cur)){
      const tentative = g.get(cur) + euclid(cur, nei.to);
      if(tentative < g.get(nei.to)){
        came.set(nei.to, cur);
        g.set(nei.to, tentative);
        f.set(nei.to, tentative + euclid(nei.to, goal));
        open.add(nei.to);
      }
    }
  }
  return {path:null, visitedCount};
}

/* =========================================================
   Drawing (roads, nodes, chosen, people)
========================================================= */
let startPick = "train station";
let endPick = "Hospital";
let chosenPath = null;
let chosenAlgo = "Dijkstra";
let walkersAnim = null;

function drawBackgroundTexture(){
  ctx.save();
  ctx.globalAlpha = 0.15;
  ctx.fillStyle = "#ffffff";
  for(let i=0;i<18;i++){
    const x = 40 + (i*120) % Math.max(1,(canvas.width-160));
    const y = 260 + Math.floor(i/6)*110;
    ctx.fillRect(x, y, 90, 55);
  }
  ctx.restore();
}

function drawRoad(e){
  const n1=nodeById(e.a), n2=nodeById(e.b);
  const x1=n1.x, y1=n1.y, x2=n2.x, y2=n2.y;

  let color = getComputedStyle(document.documentElement).getPropertyValue('--road').trim();
  if(e.kind === "special") color = getComputedStyle(document.documentElement).getPropertyValue('--special').trim();

  ctx.strokeStyle = color;
  ctx.lineWidth = 4.5;
  ctx.beginPath();
  ctx.moveTo(x1,y1); ctx.lineTo(x2,y2);
  ctx.stroke();

  /* Distance label removed (as requested) */
}

function drawNode(n){
  // purple bubble
  ctx.fillStyle = "rgba(186,140,255,0.95)";
  ctx.beginPath();
  ctx.arc(n.x, n.y, 40, 0, Math.PI*2);
  ctx.fill();

  // icon
  ctx.font = "18px system-ui, Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillStyle = "rgba(0,0,0,0.80)";
  ctx.fillText(iconByType[n.type] || "ðŸ“", n.x, n.y - 12);

  // label (wrap if long)
  ctx.fillStyle = "rgba(0,0,0,0.85)";
  ctx.font = "bold 14px system-ui, Arial";
  const words = n.id.split(" ");
  if(words.length <= 2){
    ctx.fillText(n.id, n.x, n.y + 12);
  } else {
    ctx.fillText(words.slice(0,2).join(" "), n.x, n.y + 8);
    ctx.fillText(words.slice(2).join(" "), n.x, n.y + 26);
  }
}

function drawChosenPath(){
  if(!chosenPath || chosenPath.length < 2) return;
  ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--chosen').trim();
  ctx.lineWidth = 7;
  ctx.lineCap = "round";
  ctx.beginPath();
  for(let i=0;i<chosenPath.length-1;i++){
    const a=nodeById(chosenPath[i]);
    const b=nodeById(chosenPath[i+1]);
    ctx.moveTo(a.x,a.y);
    ctx.lineTo(b.x,b.y);
  }
  ctx.stroke();
}

/* People-like stick figures (instead of dots) */
function drawWalkers(walkers){
  walkers.forEach(p=>{
    // shadow
    ctx.fillStyle = "rgba(0,0,0,0.15)";
    ctx.beginPath();
    ctx.ellipse(p.x, p.y+16, 11, 5, 0, 0, Math.PI*2);
    ctx.fill();

    // style
    ctx.strokeStyle = "#111827";
    ctx.lineWidth = 3;
    ctx.lineCap = "round";

    // head
    ctx.fillStyle = "#fde68a";
    ctx.beginPath();
    ctx.arc(p.x, p.y-2, 6, 0, Math.PI*2);
    ctx.fill();
    ctx.stroke();

    // torso
    ctx.beginPath();
    ctx.moveTo(p.x, p.y+4);
    ctx.lineTo(p.x, p.y+18);
    ctx.stroke();

    // arms
    ctx.beginPath();
    ctx.moveTo(p.x-9, p.y+10);
    ctx.lineTo(p.x+9, p.y+10);
    ctx.stroke();

    // legs
    ctx.beginPath();
    ctx.moveTo(p.x, p.y+18);
    ctx.lineTo(p.x-7, p.y+30);
    ctx.moveTo(p.x, p.y+18);
    ctx.lineTo(p.x+7, p.y+30);
    ctx.stroke();
  });
}

function draw(extraWalkers=null){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawBackgroundTexture();
  edges.forEach(drawRoad);
  drawChosenPath();
  nodes.forEach(drawNode);

  if(extraWalkers) drawWalkers(extraWalkers);
}

/* =========================================================
   Click nodes to set start then end
========================================================= */
function hitNode(x,y){
  for(const n of nodes){
    if(Math.hypot(x-n.x, y-n.y) <= 42) return n.id;
  }
  return null;
}
let clickState = 0;

canvas.addEventListener("click", (ev)=>{
  const rect = canvas.getBoundingClientRect();
  const x = (ev.clientX - rect.left) * (canvas.width/rect.width);
  const y = (ev.clientY - rect.top) * (canvas.height/rect.height);
  const id = hitNode(x,y);
  if(!id) return;

  if(clickState === 0){
    startPick = id;
    document.getElementById("startNode").value = id;
    clickState = 1;
  } else {
    endPick = id;
    document.getElementById("endNode").value = id;
    clickState = 0;
  }
});

/* =========================================================
   Recommendations
========================================================= */
function renderRecommendations(destId){
  const radius = Number(document.getElementById("nearRadius").value || 220);
  document.getElementById("radOut").textContent = radius;

  const dest = nodeById(destId);
  document.getElementById("destSummary").textContent = `Destination: ${destId}`;

  const destActs = document.getElementById("destActivities");
  destActs.innerHTML = "";
  (activities[destId] || ["No activities listed."]).forEach(a=>{
    const li=document.createElement("li");
    li.textContent=a;
    destActs.appendChild(li);
  });

  const list = nodes
    .filter(n=>n.id !== destId)
    .map(n=>({id:n.id, d: Math.hypot(n.x-dest.x, n.y-dest.y)}))
    .filter(x=>x.d <= radius)
    .sort((a,b)=>a.d-b.d);

  const near = document.getElementById("nearbyList");
  near.innerHTML = "";
  if(!list.length){
    const li=document.createElement("li");
    li.textContent = `No places within ${radius}px. Increase radius.`;
    near.appendChild(li);
    return;
  }
  list.slice(0,8).forEach(item=>{
    const li=document.createElement("li");
    const acts=(activities[item.id]||[]).slice(0,2).join(" â€¢ ");
    li.innerHTML = `<strong>${item.id}</strong>
      <span class="pill">${item.d.toFixed(1)} px away</span>
      ${acts ? `<div class="muted">Activities: ${acts}</div>` : ""}`;
    near.appendChild(li);
  });
}

/* =========================================================
   Walkers animation
========================================================= */
function buildPolyline(path){
  const pts = path.map(id => ({x: nodeById(id).x, y: nodeById(id).y}));
  const segs=[];
  let total=0;
  for(let i=0;i<pts.length-1;i++){
    const a=pts[i], b=pts[i+1];
    const len=Math.hypot(b.x-a.x, b.y-a.y);
    segs.push({a,b,len,start:total});
    total += len;
  }
  return {segs,total};
}
function pointAt(poly, s){
  const seg = poly.segs.find(g => s >= g.start && s <= g.start + g.len) || poly.segs[poly.segs.length-1];
  const t = seg.len === 0 ? 0 : (s - seg.start) / seg.len;
  return { x: seg.a.x + (seg.b.x-seg.a.x)*t, y: seg.a.y + (seg.b.y-seg.a.y)*t };
}

function animateWalkers(path){
  if(!path || path.length<2) return;
  if(walkersAnim) cancelAnimationFrame(walkersAnim);

  const poly = buildPolyline(path);
  const offsets = [0, 60, 110];

  const startTime = performance.now();
  const duration = Math.max(2600, poly.total * 8);

  function frame(now){
    const t = Math.min(1, (now - startTime)/duration);
    const people = offsets.map((off, idx)=>{
      const s = Math.min(poly.total, (t*poly.total) + off);
      const p = pointAt(poly, s);
      return { x: p.x + (idx-1)*10, y: p.y + (idx-1)*6 };
    });

    draw(people);

    if(t < 1) walkersAnim = requestAnimationFrame(frame);
  }
  walkersAnim = requestAnimationFrame(frame);
}

/* =========================================================
   UI wiring
========================================================= */
const startSel = document.getElementById("startNode");
const endSel = document.getElementById("endNode");
const algoSel = document.getElementById("algoMode");

function populateSelects(){
  const ids = nodes.map(n=>n.id);
  startSel.innerHTML = ids.map(id=>`<option value="${id}">${id}</option>`).join("");
  endSel.innerHTML = ids.map(id=>`<option value="${id}">${id}</option>`).join("");
  startSel.value = startPick;
  endSel.value = endPick;
}
populateSelects();

function pathDistancePx(path){
  if(!path || path.length<2) return 0;
  let d=0;
  for(let i=0;i<path.length-1;i++) d += euclid(path[i], path[i+1]);
  return d;
}

function setResult(algo, path){
  document.getElementById("algoOut").textContent = algo;
  if(!path){
    document.getElementById("routeOut").textContent = "No path found";
    document.getElementById("distOut").textContent = "-";
    return;
  }
  document.getElementById("routeOut").textContent = path.join(" â†’ ");
  const totalKm = pxToKm(pathDistancePx(path)).toFixed(2);
  document.getElementById("distOut").textContent = `${totalKm} km`;
}

function run(){
  startPick = startSel.value;
  endPick = endSel.value;
  chosenAlgo = algoSel.value;

  const res = (chosenAlgo === "A*")
    ? astar(startPick, endPick)
    : dijkstra(startPick, endPick);

  chosenPath = res.path;

  draw();
  setResult(chosenAlgo, chosenPath);
  renderRecommendations(endPick);

  if(chosenPath) animateWalkers(chosenPath);
}

document.getElementById("findBtn").addEventListener("click", run);

document.getElementById("clearBtn").addEventListener("click", ()=>{
  chosenPath = null;
  document.getElementById("algoOut").textContent = "-";
  document.getElementById("routeOut").textContent = "-";
  document.getElementById("distOut").textContent = "-";
  if(walkersAnim) cancelAnimationFrame(walkersAnim);
  walkersAnim = null;
  draw();
});

endSel.addEventListener("change", ()=>renderRecommendations(endSel.value));
document.getElementById("nearRadius").addEventListener("change", ()=>renderRecommendations(endSel.value));

/* Initial draw */
renderRecommendations(endPick);
draw();
</script>

</body>
</html>





